<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Transform your web development with a touch of Magic">
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <title>Learn - Magic</title>
</head>

<body class="bg-zinc-900 h-screen font-sans text-white flex flex-col">
    <nav class="px-4 py-4 md:px-16 bg-opacity-50 backdrop-blur-xl flex items-center w-full p-2 gap-5 -mt-[2px] z-10">
        <a href="/" class="flex items-center version">
            <img src="/assets/images/magic-logo.svg" height="45px" width="45px" class="inline mr-1" />
            <h1 class="text-2xl -mt-1.5 ml-1 font-extralight">magic</h1>
        </a>
        <div class="flex-grow"></div>
        <div class="hidden md:flex gap-5">
            <a href="/learn" class="magic-text-hover">
                Learn
            </a>
            <a href="/docs" class="magic-text-hover coming-soon-top">
                Docs
            </a>
            <a href="/ecosystem" class="magic-text-hover coming-soon-top">
                <p>Ecosystem</p>
            </a>
            <a href="https://github.com/Instantan/magic">
                <svg viewBox="0 0 16 16" fill="currentColor" role="img" aria-label="GitHub Logo" width="22" height="22" q:key="xo_0"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
            </a>
        </div>
        <div class="space-y-2 block md:hidden" id="open-menu">
            <span class="block w-8 h-0.5 bg-white"></span>
            <span class="block w-5 h-0.5 bg-white"></span>
        </div>
        <div id="menu" class="absolute hidden w-full top-0 left-0 pb-10 bg-black z-50">
            <nav class="px-4 py-2 md:px-16 bg-black bg-opacity-10 backdrop-blur-xl flex items-center w-full gap-5">
                <a href="/" class="mt-2">
                    <img src="/assets/images/magic-logo.svg" height="45px" width="45px" class="inline" />
                </a>
                <div class="flex-grow"></div>
                <div class="flex w-20 md:hidden" id="close-menu">
                    <span class="close after:bg-white before:bg-white"></span>
                </div>
            </nav>
            <div class="flex px-10 pt-10 pb-5 justify-center">
                <div class="flex flex-col gap-4 text-center justify-center">
                    <a href="/learn" class="magic-text-hover text-xl">
                        Learn
                    </a>
                    <a href="/docs" class="magic-text-hover text-xl coming-soon">
                        Docs
                    </a>
                    <a href="/ecosystem" class="magic-text-hover text-xl coming-soon">
                        Ecosystem
                    </a>
                    <a href="https://github.com/Instantan/magic" class="magic-text-hover text-xl">
                        Github
                    </a>
                </div>
            </div>
        </div>

    </nav>
    <main class="flex flex-row flex-grow max-w-full overflow-visible" style="max-height: calc(100vh - 77px);">
        <aside class="hidden md:flex flex-row justify-start w-72 h-full text-base py-10 md:ml-16">
            <div>
                <ul class="flex flex-col gap-3 font-extralight pb-10">
                    <li class="magic-text-hover text-sm font-bold uppercase text-[var(--blue)]">
                        <a href="#installation">Quick start</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#installation">Installation</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#webserver">Web server</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#firstview">First view</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#simplecomponent">Simple component</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#makeitlive">Make it live</a>
                    </li>
                </ul>
                <ul class="flex flex-col gap-3 font-extralight mt-10">
                    <li class="magic-text-hover text-sm font-bold uppercase text-[var(--blue)]">
                        <a href="#events">Advanced</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#static-nodes">Static nodes</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#events">Events</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#javascript">JavaScript</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#hooks">Hooks</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#deferred-assigns">Deferred assigns</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#deferred-components" class="coming-soon">Deferred components</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#temporal-data-patches" class="coming-soon">Temporal data patches</a>
                    </li>
                    <li class="magic-text-hover">
                        <a href="#handlers">Handlers</a>
                    </li>
                </ul>
            </div>
        </aside>
        <section class="
            no-scrollbar 
            px-5 md:px-20 
            lg:px-40 
            mt-[-80px] 
            w-full 
            overflow-y-scroll 
            [&>article:first-child]:pt-28 
            [&>article:not(:first-child)]:pt-40
            [&>article:not(:first-child)]:-mt-20 
            pb-96 [&>article]:prose 
            [&>article]:prose-invert 
            [&>article]:max-w-none 
            [&>article>pre]:relative 
            [&>article>pre]:rounded-2xl 
            [&>article>pre]:border 
            [&>article>pre]:border-zinc-700 
            hover:[&>article>pre]:border-[var(--purple)] 
            [&>article>pre]:transition-colors
            ">
            <article id="installation">
                <span class="uppercase text-[var(--blue)] font-bold text-sm -mb-40">Quick start</span>
                <p class="text-4xl pb-4 font-extralight" style="margin-top: 10px;">Installation</p>Start with a blank Go project and install <strong>magic</strong> with the following command.<pre><code class="no-scrollbar" style="display: block; overflow-x: scroll; padding: 1em; border-radius: 0.5em;">go get github.com/Instantan/magic</code></pre>
            </article>
            <article id="webserver">
                <p class="text-4xl pb-4 font-extralight">Web server</p>In the
                <cite>main.go</cite> file, create a simple web server. The only <strong>magic</strong> specific thing here is the <cite>magic.CompressedComponentHTTPHandler(index)</cite> wich takes a component and returns a http.Handler. You can use any
                std-library compatible router/server/mux you want.<br />
                <blockquote>Note that the following code wont compile on it's own.</blockquote>
                <pre><div class="absolute top-1 right-1 bg-zinc-900 px-1.5 rounded-2xl">main.go</div><code style="display: block; overflow-x: scroll; padding: 1em; border-radius: 0.5em;" class="no-scrollbar">package main
    
import (
    "log"
    "net/http"

    "github.com/Instantan/magic"
)

func main() {
    magic.HotReload() // include this line if you want to hot reload your application on save
    mux := http.NewServeMux()

    mux.Handle("/", magic.CompressedComponentHTTPHandler(index))

    log.Print("Listening to http://localhost:8070")
    if err := http.ListenAndServe(":8070", mux); err != nil {
        log.Fatal(err)
    }
}</code></pre>
            </article>
            <article id="firstview">
                <p class="text-4xl pb-4 font-extralight">First view</p>
                Create a new file <cite>index.go</cite>. In that file you will create the first view. Views in magic are simple http templates. The templates are like <a href="https://mustache.github.io/">mustache templates</a> logicless. It's recommended
                that the views are created on the top level, because the view creation is somewhat expensive.<br/> The <cite>indexView</cite> contains a basic HTML page. The body includes a tag with the name <cite>body</cite>. In this placeholder you
                will render the to displaying data.
                <blockquote>Note that the following code wont compile on it's own.</blockquote>
                <pre><div class="absolute top-1 right-1 bg-zinc-900 px-2 rounded-2xl">index.go</div><code class="language-go no-scrollbar" style="display: block; overflow-x: scroll; padding: 1em; border-radius: 0.5em;">package main

import (
    "github.com/Instantan/magic"
)

var indexView = magic.View(`
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Learn&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {{ body }}
    &lt;/body&gt;
    &lt;/html&gt;
`)</code></pre>
            </article>
            <article id="simplecomponent">
                <p class="text-4xl pb-4 font-extralight">Simple component</p>
                To render a view you first need to create a component. The first argument of the component takes always a <cite>magic.Socket</cite>. The second argument is a generic one. It can take any type you want and is used to pass down data to the
                component. This example uses the type <cite>magic.Empty</cite> wich is just a empty struct. <br/>Add the component just under the view you just created. In that component use the <cite>magic.Assign</cite> function to assign the value
                <cite>"Hello World"</cite> to the Socket.

                <br/>The <cite>index.go</cite> will looks afterwards like the following snippet.<br/>Now the project is runnable (<cite>go run .</cite>) and shows under the url <a href="http://localhost:8070">http://localhost:8070</a> the expected site.

                <pre class="relative"><div class="absolute top-1 right-1 bg-zinc-800 px-1.5 rounded-2xl">index.go</div><code class="no-scrollbar language-go" style="display: block; overflow-x: scroll; padding: 1em; border-radius: 0.5em;" class="language-go">package main

import (
    "github.com/Instantan/magic"
)

var indexView = magic.View(`
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Learn&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {{ body }}
    &lt;/body&gt;
    &lt;/html&gt;
`)

var index = magic.Component(func(s magic.Socket, _ magic.Empty) magic.AppliedView {
    magic.Assign(s, "body", "Hello World")
    return indexView(s)
})</code></pre>
            </article>
            <article id="makeitlive">
                <p class="text-4xl pb-4 font-extralight">Make it live</p>
                So far there is nothing much magical about this. You can statically render websites based on composeable components, but thats it.
                <br/><br/>This is where the magic starts. Magic injects a 12kb (4.6kb gzipped) small JavaScript script into the header of each website. This script turns every site into a soft realtime updateable web app. To demonstrate this we add the
                following code into our index component. So that our <cite>index.go</cite> file looks like the following snippet.<br/><br/>This snippet checks if the socket is a live socket. Then it starts a ticker. Every seconds we call <cite>magic.Assign</cite>                and assign the value of the current ticker time to the tag <cite>"body"</cite>. Then call the <cite>s.HandleEvent</cite> method and stop the timer when the unmount event is received.<br/><br/>If you run the project (<cite>go run .</cite>)
                and visit the site under <a href="http://localhost:8070">http://localhost:8070</a> you will see that the <cite>Hello World</cite> on the screen will turn into the current Date and Time that updates every second.
                <pre class="relative"><div class="absolute top-1 right-1 bg-zinc-800 px-1.5 rounded-2xl">index.go</div><code class="no-scrollbar language-go" style="display: block; overflow-x: scroll; padding: 1em; border-radius: 0.5em;" class="language-go">package main

import (
    "github.com/Instantan/magic"
)

var indexView = magic.View(`
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Learn&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {{ body }}
    &lt;/body&gt;
    &lt;/html&gt;
`)

var index = magic.Component(func(s magic.Socket, _ magic.Empty) magic.AppliedView {
    magic.Assign(s, "body", "Hello World")
    if s.Live() {
        t := time.NewTicker(time.Second)
		go func() {
			for r := range t.C {
				magic.Assign(s, "body", r.String())
			}
		}()
		s.HandleEvent(func(e string, d magic.EventData) {
			switch e {
			case magic.UnmountEvent:
				t.Stop()
			}
		})
    }
    return indexView(s)
})</code></pre>
                <br /> You can find the full example under <a href="https://github.com/Instantan/magic-quickstart-example">github.com/Instantan/magic-quickstart-example</a>.
            </article>
            <div class="h-32"></div>
            <article id="events" class="mb-[30vh]">
                <span class="uppercase text-[var(--blue)] font-bold text-sm -mb-30">Advanced</span>
                <p class="text-4xl pb-4 font-extralight" style="margin-top: 10px;">Events</p>
                Send events like onclick from the client to the server and handle it in your component.
            </article>
            <article id="static-nodes" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Static nodes</p>
                Sometimes you dont want to live render some nodes. For example when you manipulate divs with JavaScript. 
                If thats the case you can use the HTML Attribute <cite>magic:static="a"</cite>. Only when the value equals the live rendered value the node gets ignored.
            </article>
            <article id="javascript" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">JavaScript</p>
                -
            </article>
            <article id="hooks" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Hooks</p>
                -
            </article>
            <article id="deferred-assigns" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Deferred assigns</p>
                -
            </article>
            <article id="deferred-components" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Deferred components</p>
                -
            </article>
            <article id="temporal-data-patches" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Temporal data patches</p>
                -
            </article>
            <article id="handlers" class="mb-[30vh]">
                <p class="text-4xl pb-4 font-extralight">Handlers</p>
                -
            </article>
        </section>
    </main>
    <script src="/src/index.js" type="module" defer></script>
    <script>
        hljs.highlightAll();
    </script>
</body>


</html>