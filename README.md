# magic

<img height="120px" align="right" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMjAiIHZpZXdCb3g9IjAgMCAyMTM0IDIxMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6c2VyaWY9Imh0dHA6Ly93d3cuc2VyaWYuY29tLyIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoyOyI+PGc+PGcgaWQ9IlBlbnRhZ3JhbSI+PGc+PHBhdGggZD0iTTEwNjYuNjcsMjA2Ni42N2MtMjY3LjEwOSwtMCAtNTE4LjIzNCwtMTA0LjAyMSAtNzA3LjEwOSwtMjkyLjg5MmMtMTg4Ljg3LC0xODguODc1IC0yOTIuODkxLC00NDAgLTI5Mi44OTEsLTcwNy4xMDhjLTAsLTI2Ny4xMDkgMTA0LjAyMSwtNTE4LjIzNCAyOTIuODkxLC03MDcuMTA5YzE4OC44NzUsLTE4OC44NyA0NDAsLTI5Mi44OTEgNzA3LjEwOSwtMjkyLjg5MWMyNjcuMTA4LC0wIDUxOC4yMjksMTA0LjAyMSA3MDcuMTA4LDI5Mi44OTFjMTg4Ljg3MSwxODguODc1IDI5Mi44OTIsNDQwIDI5Mi44OTIsNzA3LjEwOWMtMCwyNjcuMTA4IC0xMDQuMDIxLDUxOC4yMzMgLTI5Mi44OTIsNzA3LjEwOGMtMTg4Ljg3OSwxODguODcxIC00NDAsMjkyLjg5MiAtNzA3LjEwOCwyOTIuODkyWiIgc3R5bGU9ImZpbGw6IzcwMWNiNTtmaWxsLXJ1bGU6bm9uemVybzsiLz48L2c+PHBhdGggZD0iTTEwNjYuNjcsNjYuNjY3bC0wLDIwMDBjMjY3LjEwOCwtMCA1MTguMjI5LC0xMDQuMDIxIDcwNy4xMDgsLTI5Mi44OTJjMTg4Ljg3MSwtMTg4Ljg3NSAyOTIuODkyLC00NDAgMjkyLjg5MiwtNzA3LjEwOGMtMCwtMjY3LjEwOSAtMTA0LjAyMSwtNTE4LjIzNCAtMjkyLjg5MiwtNzA3LjEwOWMtMTg4Ljg3OSwtMTg4Ljg3IC00NDAsLTI5Mi44OTEgLTcwNy4xMDgsLTI5Mi44OTFaIiBzdHlsZT0iZmlsbDojNmQ0NmY1O2ZpbGwtcnVsZTpub256ZXJvOyIvPjxwYXRoIGQ9Ik0xNzE4LjU5LDEwNjYuNjdsMjcxLjgzMywtNDcwLjgzNGMxMS4xNjcsLTE5LjMzNyAxMS4xNjcsLTQzLjE2MiAwLC02Mi41Yy0xMS4xNjcsLTE5LjMzNyAtMzEuNzk2LC0zMS4yNSAtNTQuMTI1LC0zMS4yNWwtNTQzLjY3MSwwbC0yNzEuODMzLC00NzAuODMzYy0xMS4xNjcsLTE5LjMzNyAtMzEuOCwtMzEuMjUgLTU0LjEyOSwtMzEuMjVjLTIyLjMzLDAgLTQyLjk2MywxMS45MTMgLTU0LjEyNSwzMS4yNWwtMjcxLjgzOCw0NzAuODMzbC01NDMuNjcxLDBjLTIyLjMyOSwwIC00Mi45NjIsMTEuOTEzIC01NC4xMjUsMzEuMjVjLTExLjE2NiwxOS4zMzggLTExLjE2Niw0My4xNjMgMCw2Mi41bDI3MS44MzgsNDcwLjgzNGwtMjcxLjgzOCw0NzAuODMzYy0xMS4xNjYsMTkuMzM4IC0xMS4xNjYsNDMuMTYzIDAsNjIuNWMxMS4xNjMsMTkuMzM4IDMxLjc5NiwzMS4yNSA1NC4xMjUsMzEuMjVsNTQzLjY3MSwwbDI3MS44MzgsNDcwLjgzM2MxMS4xNjIsMTkuMzM4IDMxLjc5NSwzMS4yNSA1NC4xMjUsMzEuMjVjMjIuMzI5LDAgNDIuOTYyLC0xMS45MTIgNTQuMTI1LC0zMS4yNWwyNzEuODMzLC00NzAuODMzbDU0My42NzEsMGMyMi4zMjksMCA0Mi45NjIsLTExLjkxMiA1NC4xMjUsLTMxLjI1YzExLjE2MiwtMTkuMzM3IDExLjE2NywtNDMuMTYyIC0wLC02Mi41bC0yNzEuODI5LC00NzAuODMzWm0xMDkuNDU0LC00MzkuNTg0bC0xODEuNjI1LDMxNC41ODRsLTE4MS42MjUsLTMxNC41ODRsMzYzLjI1LDBabS0yNTMuNzkyLDQzOS41ODRsLTI1My43OTYsNDM5LjU4M2wtNTA3LjU4MywwbC0yNTMuNzk2LC00MzkuNTgzbDI1My43OTIsLTQzOS41ODRsNTA3LjU4NywwbDI1My43OTYsNDM5LjU4NFptLTUwNy41ODcsLTg3OS4xNjdsMTgxLjYyNSwzMTQuNTgzbC0zNjMuMjUsMGwxODEuNjI1LC0zMTQuNTgzWm0tNzYxLjM4LDQzOS41ODNsMzYzLjI1MSwwbC0xODEuNjI2LDMxNC41ODRsLTE4MS42MjUsLTMxNC41ODRabTAsODc5LjE2N2wxODEuNjI1LC0zMTQuNTgzbDE4MS42MjUsMzE0LjU4M2wtMzYzLjI1LDBabTc2MS4zOCw0MzkuNTgzbC0xODEuNjI1LC0zMTQuNTgzbDM2My4yNSwwbC0xODEuNjI1LDMxNC41ODNabTM5OC4xMjksLTQzOS41ODNsMTgxLjYyNSwtMzE0LjU4M2wxODEuNjI1LDMxNC41ODNsLTM2My4yNSwwWiIgc3R5bGU9ImZpbGw6IzZkNDZmNTtmaWxsLXJ1bGU6bm9uemVybzsiLz48Zz48cGF0aCBkPSJNMTA2Ni42NywyMTMzLjMzYy0yODQuOTE3LDAgLTU1Mi43NzksLTExMC45NTQgLTc1NC4yNSwtMzEyLjQxNmMtMjAxLjQ2MywtMjAxLjQ3MSAtMzEyLjQxNywtNDY5LjMzNCAtMzEyLjQxNywtNzU0LjI1YzAsLTI4NC45MTcgMTEwLjk1NCwtNTUyLjc4IDMxMi40MTcsLTc1NC4yNWMyMDEuNDcxLC0yMDEuNDYzIDQ2OS4zMzMsLTMxMi40MTcgNzU0LjI1LC0zMTIuNDE3YzI4NC45MTYsLTAgNTUyLjc3OSwxMTAuOTU0IDc1NC4yNSwzMTIuNDE3YzIwMS40NjIsMjAxLjQ3IDMxMi40MTYsNDY5LjMzMyAzMTIuNDE2LDc1NC4yNWMwLDI4NC45MTYgLTExMC45NTQsNTUyLjc3OSAtMzEyLjQxNiw3NTQuMjVjLTIwMS40NzEsMjAxLjQ2MiAtNDY5LjMzNCwzMTIuNDE2IC03NTQuMjUsMzEyLjQxNlptLTAsLTIwMDguMzNjLTUxOS4yMzgsMCAtOTQxLjY2Nyw0MjIuNDI5IC05NDEuNjY3LDk0MS42NjdjLTAsNTE5LjIzNyA0MjIuNDI5LDk0MS42NjYgOTQxLjY2Nyw5NDEuNjY2YzUxOS4yMzcsMCA5NDEuNjY2LC00MjIuNDI5IDk0MS42NjYsLTk0MS42NjZjMCwtNTE5LjIzOCAtNDIyLjQyOSwtOTQxLjY2NyAtOTQxLjY2NiwtOTQxLjY2N1oiIHN0eWxlPSJmaWxsOiM2ZDQ2ZjU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PC9nPjxwYXRoIGQ9Ik0xODIwLjkyLDMxMi40MTdjLTIwMS40NzEsLTIwMS40NjMgLTQ2OS4zMzQsLTMxMi40MTcgLTc1NC4yNSwtMzEyLjQxN2wtMCwxMjVjNTE5LjIzNywwIDk0MS42NjYsNDIyLjQyOSA5NDEuNjY2LDk0MS42NjdjMCw1MTkuMjM3IC00MjIuNDI5LDk0MS42NjYgLTk0MS42NjYsOTQxLjY2NmwtMCwxMjVjMjg0LjkxNiwwIDU1Mi43NzksLTExMC45NTQgNzU0LjI1LC0zMTIuNDE2YzIwMS40NjIsLTIwMS40NzEgMzEyLjQxNiwtNDY5LjMzNCAzMTIuNDE2LC03NTQuMjVjMCwtMjg0LjkxNyAtMTEwLjk1NCwtNTUyLjc4IC0zMTIuNDE2LC03NTQuMjVaIiBzdHlsZT0iZmlsbDojNzAxY2I1O2ZpbGwtcnVsZTpub256ZXJvOyIvPjxwYXRoIGQ9Ik0xMTIwLjc5LDIxMDIuMDhsMjcxLjgzMywtNDcwLjgzM2w1NDMuNjcxLDBjMjIuMzI5LDAgNDIuOTYyLC0xMS45MTIgNTQuMTI1LC0zMS4yNWMxMS4xNjIsLTE5LjMzNyAxMS4xNjcsLTQzLjE2MiAtMCwtNjIuNWwtMjcxLjgzMywtNDcwLjgzM2wyNzEuODMzLC00NzAuODM0YzExLjE2NywtMTkuMzM3IDExLjE2NywtNDMuMTYyIC0wLC02Mi41Yy0xMS4xNjcsLTE5LjMzNyAtMzEuNzk2LC0zMS4yNSAtNTQuMTI1LC0zMS4yNWwtNTQzLjY2NywwbC0yNzEuODMzLC00NzAuODMzYy0xMS4xNjcsLTE5LjMzNyAtMzEuOCwtMzEuMjUgLTU0LjEyOSwtMzEuMjVsLTAsMTg3LjVsMTgxLjYyNSwzMTQuNTgzbC0xODEuNjI1LDBsLTAsMTI1bDI1My43OTEsMGwyNTMuNzk2LDQzOS41ODRsLTI1My43OTYsNDM5LjU4M2wtMjUzLjc5MSwwbC0wLDEyNWwxODEuNjI1LDBsLTE4MS42MjUsMzE0LjU4M2wtMCwxODcuNWMyMi4zMjksMCA0Mi45NjIsLTExLjkxMiA1NC4xMjUsLTMxLjI1Wm0zNDQuMDA0LC0xNDc1bDM2My4yNSwwbC0xODEuNjI1LDMxNC41ODRsLTE4MS42MjUsLTMxNC41ODRabTE4MS42MjUsNTY0LjU4NGwxODEuNjI1LDMxNC41ODNsLTM2My4yNSwtMGwxODEuNjI1LC0zMTQuNTgzWiIgc3R5bGU9ImZpbGw6IzcwMWNiNTtmaWxsLXJ1bGU6bm9uemVybzsiLz48L2c+PGcgaWQ9IkV5ZS0tb3Blbi0iIHNlcmlmOmlkPSJFeWUgKG9wZW4pIj48ZWxsaXBzZSBjeD0iMTA2Ni42NyIgY3k9IjEwNjYuNjciIHJ4PSI1NzkuNzU4IiByeT0iMjUwIiBzdHlsZT0iZmlsbDojZjlmOWY5OyIvPjxwYXRoIGQ9Ik0xNjQ2LjQyLDEwNjYuNjdjLTExLjA5MiwtMTAuMjA5IC0yNzUuMTg4LC0yNTAgLTU3OS43NTQsLTI1MGwtMCw1MDBjMzA0LjU2NiwtMCA1NjguNjYyLC0yMzkuNzkyIDU3OS43NTQsLTI1MFoiIHN0eWxlPSJmaWxsOiNlMmRmZjQ7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PGc+PHBhdGggZD0iTTEwNjYuNjcsMTMxNi42N2MtMTM3Ljg1LC0wIC0yNTAsLTExMi4xNSAtMjUwLC0yNTBjLTAsLTEzNy44NSAxMTIuMTUsLTI1MCAyNTAsLTI1MGMxMzcuODUsLTAgMjUwLDExMi4xNSAyNTAsMjUwYy0wLDEzNy44NSAtMTEyLjE1LDI1MCAtMjUwLDI1MFoiIHN0eWxlPSJmaWxsOiMwYTc4OWI7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PC9nPjxwYXRoIGQ9Ik0xMzE2LjY3LDEwNjYuNjdjLTAsLTEzNy44NSAtMTEyLjE1LC0yNTAgLTI1MCwtMjUwbC0wLDUwMGMxMzcuODUsLTAgMjUwLC0xMTIuMTUgMjUwLC0yNTBaIiBzdHlsZT0iZmlsbDojMDg0NzVlO2ZpbGwtcnVsZTpub256ZXJvOyIvPjxnPjxwYXRoIGQ9Ik0xMDY2LjY3LDExNTguMzNjLTY4LjkyNSwwIC0xMjUsLTU2LjA3NSAtMTI1LC0xMjVjLTAsLTY4LjkyNSA1Ni4wNzUsLTEyNSAxMjUsLTEyNWM2OC45MjUsMCAxMjUsNTYuMDc1IDEyNSwxMjVjLTAsNjguOTI1IC01Ni4wNzUsMTI1IC0xMjUsMTI1WiIgc3R5bGU9ImZpbGw6I2FjY2VmZjtmaWxsLXJ1bGU6bm9uemVybzsiLz48L2c+PHBhdGggZD0iTTExOTEuNjcsMTAzMy4zM2MtMCwtNjguOTI1IC01Ni4wNzUsLTEyNSAtMTI1LC0xMjVsLTAsMjUwYzY4LjkyNSwwIDEyNSwtNTYuMDc1IDEyNSwtMTI1WiIgc3R5bGU9ImZpbGw6Izk4OWRlYztmaWxsLXJ1bGU6bm9uemVybzsiLz48cGF0aCBkPSJNMTY4OC43NCwxMDIwLjY4Yy0xMS44MjUsLTEwLjg3OSAtMjkzLjM3MSwtMjY2LjUwOCAtNjIyLjA3NSwtMjY2LjUwOGMtMzI4LjcwOSwtMCAtNjEwLjI1NSwyNTUuNjI5IC02MjIuMDc5LDI2Ni41MDhjLTEyLjg1OSwxMS44MzMgLTIwLjE3NSwyOC41MTIgLTIwLjE3NSw0NS45OTJjLTAsMTcuNDc5IDcuMzE2LDM0LjE1NCAyMC4xNzUsNDUuOTkxYzExLjgyNSwxMC44OCAyOTMuMzcsMjY2LjUwOSA2MjIuMDc5LDI2Ni41MDljMzI4LjcwNCwtMCA2MTAuMjUsLTI1NS42MyA2MjIuMDc1LC0yNjYuNTA5YzEyLjg2MiwtMTEuODMzIDIwLjE3OSwtMjguNTEyIDIwLjE3OSwtNDUuOTkxYy0wLC0xNy40OCAtNy4zMTcsLTM0LjE1NSAtMjAuMTc5LC00NS45OTJabS02MjIuMDc1LDIzMy40OTJjLTIwMS42MjEsLTAgLTM4OS44LC0xMTkuNDcxIC00ODAuNiwtMTg3LjVjOTAuOCwtNjguMDI1IDI3OC45NzksLTE4Ny41IDQ4MC42LC0xODcuNWMyMDEuNjE2LC0wIDM4OS43OTEsMTE5LjQ3IDQ4MC41OTYsMTg3LjVjLTkwLjgxMyw2OC4wMzMgLTI3OSwxODcuNSAtNDgwLjU5NiwxODcuNVoiIHN0eWxlPSJmaWxsOiM2ZDQ2ZjU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PHBhdGggZD0iTTE1NDcuMjYsMTA2Ni42N2MtOTAuODEzLDY4LjAzMyAtMjc5LDE4Ny41IC00ODAuNTk2LDE4Ny41bC0wLDEyNWMzMjguNzA0LC0wIDYxMC4yNSwtMjU1LjYyOSA2MjIuMDc1LC0yNjYuNTA5YzEyLjg2MiwtMTEuODMzIDIwLjE3OSwtMjguNTEyIDIwLjE3OSwtNDUuOTkxYy0wLC0xNy40NzkgLTcuMzE3LC0zNC4xNTQgLTIwLjE3OSwtNDUuOTkyYy0xMS44MjUsLTEwLjg3OSAtMjkzLjM3MSwtMjY2LjUwOCAtNjIyLjA3NSwtMjY2LjUwOGwtMCwxMjVjMjAxLjYxNiwtMCAzODkuNzkxLDExOS40NzEgNDgwLjU5NiwxODcuNVoiIHN0eWxlPSJmaWxsOiM3MDFjYjU7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PC9nPjwvZz48L3N2Zz4=" />

Magic is a powerful, yet easy-to-use web development framework written in Golang that simplifies the web development process. With its small JavaScript footprint of under 12kb (4.6kb gzipped), Magic helps you build fast and efficient web applications.

# Getting started


For a simple live counter example:

> main.go
```go
package main

func main() {
    mux := http.NewServeMux()
	mux.Handle("/", magic.CompressedComponentHTTPHandler(home))
	log.Print("Listening to http://localhost:8070")
	if err := http.ListenAndServe(":8070", mux); err != nil {
		log.Fatal(err)
	}
}
```

> home.go
```go
package main

import (
	"time"

	"github.com/Instantan/magic"
)

var homeView = magic.View(`
	<!DOCTYPE html>
	<html>
	<head>
		<title>Time</title>
	</head>
	<body>
		<p>{{counter}}</p>
	</body>
	</html>
`)

var home = magic.Component(func(s magic.Socket, e magic.Empty) magic.AppliedView {
	magic.UseLiveRoutine(s, func(quit <-chan struct{}) {
		t := time.NewTicker(time.Millisecond * 1000)
		for {
			select {
			case c := <-t.C:
				magic.Assign(s, "time", c.String())
			case <-quit:
                t.Stop()
                return
			}
		}
	})
	return homeView(s)
})

```

# Roadmap

- Clean up socket.go, ref.go and view.go
- Benchmarking, memory reduction and performance improvements
- Unit tests